<html>
<head>

<script language="javascript"  src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.0/jquery.min.js"></script>
<script language="javascript" src="http://people.iola.dk/olau/flot/jquery.flot.js"></script>

<script type="text/javascript">
// function loadXMLDoc()
// {
	function toServer(i) {
                    var xmlhttp = new XMLHttpRequest();
                    xmlhttp.open("GET", "http://localhost:8081" + "?i=" + encodeURIComponent(i), false);
                    xmlhttp.send();
                    var fromServer =  xmlhttp.responseText;
                    return fromServer;
                }

    function calculate(){
    				var input=document.getElementById("sin").value;
    				var y_index;
    				var sin_arr=[];
    				if (input=="sin(x)") {
    					for(var i = -3.14; i < 3.14; i+=0.1)
    					{
    						y_index=toServer(i);
    						console.log(y_index);
    						sin_arr.push([i,parseFloat(y_index)]);
    					}

    				};

    				$.plot($("#res"),[{data:sin_arr,label:"sin(x)",color:"red"}]);//draw the graphic 

                    }
                
	// var xmlhttp;
	// var data1=document.getElementById("sin").value;
	// if (window.XMLHttpRequest)
	//   {// code for IE7+, Firefox, Chrome, Opera, Safari
	//   xmlhttp=new XMLHttpRequest();
	//   }
	// else
	//   {// code for IE6, IE5
	//   xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
	//   }
	// xmlhttp.onreadystatechange=function()
	//   {
	//   if (xmlhttp.readyState==4 && xmlhttp.status==200)
	//     {	//according to the respond data create a graphic
	//     	var arr=[];
	//     	var sin_arr=[];
	//     	var i=0;
	//     	var j=1;
	    	
	// 		var sin= xmlhttp.responseText;
	// 		arr=sin.split(",").map(Number);
			
	// 		while(j<arr.length)
	// 		{
	// 			sin_arr.push([arr[i],arr[j]]);
	// 			i+=2;
	// 			j+=2;
				
	// 		}
			
	// 		 $.plot($("#res"),[{data:sin_arr,label:"sin(x)",color:"red"}]);//draw the graphic 
	
	
	// 	/* document.getElementById("test").innerHTML=sin_arr[0]; */
	//     }
	//   }
	// xmlhttp.open("GET","http://localhost:8081?data1="+encodeURIComponent(data1),false);
	// xmlhttp.send();

	// }

</script>
</head>
<body>

<h2>Sin(x) Calculate on server</h2>
<button type="button" onclick="calculate()" value="sin(x)" id="sin">Get Sin(x) calculation from server</button>
<br>
<br>
<div id="res" style="width:600px;height:600px;"></div>
<p id="test"></div>
</body>
</html>
